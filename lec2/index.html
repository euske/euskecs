<!DOCTYPE HTML>
<html lang="ja">
<head>
<title>コンピュータのソフトウェア</title>
<style><!--
body { line-height: 1.5; }
table { border-collapse: collapse; }
td { padding: 0.5em; text-align: center; }
img {
        image-rendering: -moz-crisp-edges;         /* Firefox */
        image-rendering:   -o-crisp-edges;         /* Opera */
        image-rendering: -webkit-optimize-contrast;/* Webkit (non-standard naming) */
        image-rendering: crisp-edges;
}
p { margin: 0; }
.figure { margin: 0.5em; padding: 0.5em; border: 1px solid gray; }
--></style>
</head>
<body>
<h1>コンピュータのソフトウェア</h1>

<h2>ソフトウェアとは?</h2>
<ul>
<li> ソフトウェア (変更可能) ⇔ ハードウェア (変更不可能)
<li> プログラム (= 命令の列)
</ul>

<h3>ソフトウェア上の課題</h3>
<ul>
<li> どうやって情報を 0 と 1 であらわすか
<li> どうやってその 0 と 1 をうまく操作するか
<li> はやく、やすく、うまく作る
</ul>

<h2>すべての情報を 0 と 1 であらわす (つづき)</h2>

<h3>画像を 0 と 1 であらわす</h3>
<div class=figure>
<svg xmlns="http://www.w3.org/2000/svg" 
     xmlns:xlink="http://www.w3.org/1999/xlink"
     version="1.1" width="310" height="164">
  <g style="font-family: monospace;" transform="translate(170,20)">
    <text x="0" y="0">00000000</text>
    <text x="0" y="20">00011000</text>
    <text x="0" y="40">00100100</text>
    <text x="0" y="60">01000010</text>
    <text x="0" y="80">01111110</text>
    <text x="0" y="100">01000010</text>
    <text x="0" y="120">01000010</text>
    <text x="0" y="140">01000010</text>
  </g>
  <g fill="none" stroke="black" transform="translate(1,1) scale(2,2)">
    <line x1="0" y1="0" x2="0" y2="80" />
    <line x1="10" y1="0" x2="10" y2="80" />
    <line x1="20" y1="0" x2="20" y2="80" />
    <line x1="30" y1="0" x2="30" y2="80" />
    <line x1="40" y1="0" x2="40" y2="80" />
    <line x1="50" y1="0" x2="50" y2="80" />
    <line x1="60" y1="0" x2="60" y2="80" />
    <line x1="70" y1="0" x2="70" y2="80" />
    <line x1="80" y1="0" x2="80" y2="80" />
    <line x1="0" y1="0" x2="80" y2="0" />
    <line x1="0" y1="10" x2="80" y2="10" />
    <line x1="0" y1="20" x2="80" y2="20" />
    <line x1="0" y1="30" x2="80" y2="30" />
    <line x1="0" y1="40" x2="80" y2="40" />
    <line x1="0" y1="50" x2="80" y2="50" />
    <line x1="0" y1="60" x2="80" y2="60" />
    <line x1="0" y1="70" x2="80" y2="70" />
    <line x1="0" y1="80" x2="80" y2="80" />
  </g>
  <g fill="black" stroke="none" transform="translate(1,1) scale(2,2)">
    <rect x="10" y="60" width="10" height="10" />
    <rect x="10" y="50" width="10" height="10" />
    <rect x="10" y="40" width="10" height="10" />
    <rect x="10" y="30" width="10" height="10" />
    <rect x="20" y="20" width="10" height="10" />
    <rect x="30" y="10" width="10" height="10" />
    <rect x="40" y="10" width="10" height="10" />
    <rect x="50" y="20" width="10" height="10" />
    <rect x="60" y="30" width="10" height="10" />
    <rect x="60" y="40" width="10" height="10" />
    <rect x="60" y="50" width="10" height="10" />
    <rect x="60" y="60" width="10" height="10" />
    <rect x="20" y="40" width="10" height="10" />
    <rect x="30" y="40" width="10" height="10" />
    <rect x="40" y="40" width="10" height="10" />
    <rect x="50" y="40" width="10" height="10" />
  </g>
</svg>
</div>
<p>
ひとつの点 = 「<strong>ピクセル</strong>」

<h4>色を 0 と 1 であらわす</h4>
<p>
色とは何か?
<div class=figure>
<a href="https://en.wikipedia.org/wiki/File:Spectrum4websiteEval.png"><img src="Spectrum4websiteEval.png"></a>
</div>
<ul>
<li> 桿体細胞 (明るさを認識する)
<li> 錐体細胞 (色を認識する - 
<span style="color:red;">赤</span>、
<span style="color:green;">緑</span>、
<span style="color:blue;">青</span>のあたりにピークがある)
</ul>
<div class=figure>
<a href="https://en.wikipedia.org/wiki/File:Cone-response.png"><img src="Cone-response.png"></a>
</div>
<p>
<span style="color:red;">R</span>,
<span style="color:green;">G</span>,
<span style="color:blue;">B</span>
それぞれを 8ビット (256段階) の数値で表す = 256×256×256種類の色

<h4>ビットマップ形式</h4>
<ul>
<li> ピクセルをひたすら並べたもの
<li> 24ビット(カラー)、8ビット(グレースケール)、1ビット(白黒)
<li> Windows の <strong>BMP形式</strong> はこの方式。
<div class=figure>
<img src="out.bmp" width="64" height="64">
</div>
<li> A4用紙一枚は約8.3×11.7インチである。
<p> 1インチあたり 300ピクセル (300dpi) の解像度として、
3500×2500ピクセル 24ビット = 3500×2500×3バイト = 26,250,000バイトの画像
</ul>

<h4>データ圧縮方式</h4>
<ul>
<li> 可逆圧縮 … もとに戻る (可逆) 圧縮。
<p> <strong>PNG形式</strong> (くり返しを省く)
<li> 非可逆圧縮 … 完全にはもとに戻らない (非可逆) 圧縮。
<p> <strong>JPEG形式</strong> (人間が気づかない部分を省く)
<p>
<a href="https://en.wikipedia.org/wiki/File:JPEG_example_JPG_RIP_050.jpg"><img src="JPEG_example_JPG_RIP_050.jpg" width="100"></a>
<a href="https://en.wikipedia.org/wiki/File:JPEG_example_JPG_RIP_010.jpg"><img src="JPEG_example_JPG_RIP_010.jpg" width="100"></a>
<a href="https://en.wikipedia.org/wiki/File:JPEG_example_JPG_RIP_001.jpg"><img src="JPEG_example_JPG_RIP_001.jpg" width="100"></a>
</ul>

<h3>文字を 0 と 1 であらわす</h3>

<p>
数値 = 文字と考え、数値の列を<strong>文字列</strong>とする。

<ul>
<li> <strong>ASCII</strong> コード= 0〜127 (1バイト)。
<li> <strong>Unicode</strong> = 0〜113021 (最高4バイト)。
<a href="http://www.unicode.org/charts/">Unicode 7.0</a>
(<a href="http://www.unicode.org/charts/PDF/U0000.pdf">U0000</a>,
<a href="http://www.unicode.org/charts/PDF/U0900.pdf">U0900</a>,
<a href="http://www.unicode.org/charts/PDF/U4E00.pdf">U4E00</a>)
<li> JIS X 0208 = 0x2121〜0x7E7E (2バイト)。
<a href="http://kikaku.itscj.ipsj.or.jp/ISO-IR/087.pdf">JIS X 0208</a>
<li> GB 2312 (国標) = 0xA1A1〜0xFEFE (2バイト)。
<a href="http://itscj.ipsj.or.jp/ISO-IR/058.pdf">GB 2312</a>
</ul>

<h4>テキストファイル</h4>

<div class=figure>
<a href="ascii.txt">ascii.txt</a>
<blockquote><pre>
Hello!
48 65 6c 6c 6f 21
</pre></blockquote>
</div>

<div class=figure>
<a href="sjis.txt">sjis.txt</a>
<blockquote><pre>
日本
93 fa 96 7b
</pre></blockquote>
</div>

<h4>文字の描画と文字認識</h4>
<ul>
<li> 文字の描画: 文字コード → ビットマップ → 出力装置
<li> 文字の認識: 入力装置 → ビットマップ → 文字コード
</ul>

<h3>音声を 0 と 1 であらわす</h3>

<p>音とは何か?
<div class=figure>
<svg width="400" height="160" 
     xmlns="http://www.w3.org/2000/svg" 
     xmlns:svg="http://www.w3.org/2000/svg">
  <text x="10" y="105">0</text>
  <g transform="translate(20,0)">
  <g fill="none" stroke="black">
    <path d="m55,192.98218c25.28706,-49.47075 56.62101,-46.49506 87.40526,-0.37196c30.78423,46.12309 55.52156,42.77545 79.70918,-0.74391c24.18762,-43.51938 28.03564,-34.96429 40.67917,5.95135c12.64352,40.91565 1.64917,75.50797 14.29269,-1.48784c12.64352,-76.99581 12.64352,-101.5452 21.43903,-41.28761c8.7955,60.2576 16.49155,60.62956 26.93619,37.93997c10.44467,-22.68959 12.64355,-11.90274 17.591,-3.7196l4.94748,8.18314" transform="translate(-40,-100)" stroke-width="2" />
    <line x1="0" y1="100" x2="320" y2="100" />
    <line x1="10" y1="30" x2="10" y2="160" />
  </g>
  <g fill="none" stroke="gray">
    <rect x="10" y="90" width="10" height="10" />
    <rect x="20" y="75" width="10" height="25" />
    <rect x="30" y="65" width="10" height="35" />
    <rect x="40" y="60" width="10" height="40" />
    <rect x="50" y="55" width="10" height="45" />
    <rect x="60" y="60" width="10" height="40" />
    <rect x="70" y="65" width="10" height="35" />
    <rect x="80" y="75" width="10" height="25" />
    <rect x="90" y="90" width="10" height="10" />
    <rect x="100" y="100" width="10" height="2" />
    <rect x="110" y="100" width="10" height="10" />
    <rect x="120" y="100" width="10" height="20" />
    <rect x="130" y="100" width="10" height="25" />
    <rect x="140" y="100" width="10" height="28" />
    <rect x="150" y="100" width="10" height="25" />
    <rect x="160" y="100" width="10" height="15" />
    <rect x="170" y="100" width="10" height="5" />
    <rect x="180" y="85" width="10" height="15" />
    <rect x="190" y="70" width="10" height="30" />
    <rect x="200" y="65" width="10" height="35" />
    <rect x="210" y="75" width="10" height="25" />
    <rect x="220" y="100" width="10" height="10" />
    <rect x="230" y="100" width="10" height="30" />
    <rect x="240" y="60" width="10" height="40" />
    <rect x="250" y="25" width="10" height="75" />
    <rect x="260" y="80" width="10" height="20" />
    <rect x="270" y="100" width="10" height="5" />
    <rect x="280" y="90" width="10" height="10" />
    <rect x="290" y="80" width="10" height="20" />
    <rect x="300" y="85" width="10" height="15" />
  </g>
  </g>
</svg>
</div>

<ul>
<li> すべては波形 (スピーカーの振動板の動き) で表現される。
<li> 波形の形を数値の列によって表す。(Windows の <strong>WAV形式</strong>)
<p> 10, 25, 35, 40, 45, 40, 35, ...
<li> 非可逆圧縮 … <strong>MP3形式</strong> が有名。
<p> 完全にはもとに戻らない (非可逆) 圧縮。(人間が気づかない部分を省く)
</ul>


<h3>プログラムを0と1であらわす</h3>
<h4>32ビット用プログラム</h4>
<blockquote style="font-size:80%; background:#eeeeee;"><pre>
  00401066: 57                 push        edi
  00401067: 33 FF              xor         edi,edi
  00401069: 85 DB              test        ebx,ebx
  0040106B: 7E 26              jle         00401093
  0040106D: 8B F5              mov         esi,ebp
  0040106F: 8B 6C 24 18        mov         ebp,dword ptr [esp+18h]
  00401073: 2B E8              sub         ebp,eax
  00401075: 8B 0C 2E           mov         ecx,dword ptr [esi+ebp]
  ...
</pre></blockquote>

<h4>64ビット用プログラム</h4>
<blockquote style="font-size:80%; background:#eeeeee;"><pre>
  0000000140001164: E8 B7 03 00 00     	  call        0000000140001520
  0000000140001169: 85 C0              	  test        eax,eax
  000000014000116B: 74 0F              	  je          000000014000117C
  000000014000116D: 45 33 C0           	  xor         r8d,r8d
  0000000140001170: 41 8D 50 02        	  lea         edx,[r8+2]
  0000000140001174: 33 C9              	  xor         ecx,ecx
  0000000140001176: FF 15 04 1F 00 00  	  call        qword ptr [40003080h]
  000000014000117C: 48 8B 0D 25 0F 00 00  mov         rcx,qword ptr [400020A8h]
  0000000140001183: 48 8B 05 A6 1E 00 00  mov         rax,qword ptr [40003030h]
  ...
</pre></blockquote>
 

<h3>データ形式</h3>
<p>
コンピュータ上では、すべての情報は 0 と 1 からなる。
その意味は、<strong>解釈する方法によって決まる</strong>。
<ul>
<li> ファイルの「拡張子」
</ul>

<h2>オペレーティングシステムとは</h2>

<h3>ソフトウェアの階層</h3>
<ul>
<li> やりたいこと (アプリケーション) が多様
<li> 使用する機械 (ハードウェア) が多様
</ul>
<p>
これらの要素が変わるたびに、毎回すべて作り直すのは大変。
→ いくつかの取り替え可能な「部品」から作る。

<div class=figure>
<table border>
<tr><td>アプリケーション ソフトウェア</td></tr>
<tr><td>オペレーティング システム (OS)</td></tr>
<tr><td>デバイスドライバ</td></tr>
</table>
</div>

<h4>実際のWindowsの構造</h4>
<div class=figure>
<a href="https://en.wikipedia.org/wiki/File:Windows_2000_architecture.svg"><img width="330" src="Windows_2000_architecture.svg"></a>
</div>

<h3>アプリケーションソフトウェア (応用ソフトウェア)</h3>
<p>
いわゆる通常の「ソフトウェア会社」が作る。
個々の目的に特化されている。

<h3>デバイスドライバ</h3>
<p>
周辺機器を特定の OS の標準機能として動かすためのプログラム。
ハードウェアメーカー (Canon, Epson, Samsung など) が作る。

<h3>オペレーティングシステム (基本ソフトウェア)</h3>
<p>
ハードウェアメーカー (Apple)、
あるいは大規模ソフトウェアメーカー
(Microsoft, Googleなど) が作る。

<h4>オペレーティングシステムの機能</h4>
<p>
現在の OS には、多くのアプリケーションで
よく使われる標準機能があらかじめ搭載されている。
<ul>
<li> 文字・画像・音声データの処理機能 (描画、日本語変換、音声合成)
<li> ファイル・フォルダの管理機能 (エクスプローラー)
<li> マルチタスク・マルチウィンドウ機能 (複数のアプリケーションを同時に使用する)
<li> セキュリティ機能 (アクセスを制限する)
<li> ネットワーク機能 (ファイル共有、インターネットへのアクセスなど)
<li> OSの機能は何万と存在する。また、増えつづけている。
  <p> 参考: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff818516%28v=vs.85%29.aspx">Windows API Index</a>
</ul>

<p>
これらの多くの機能は実際には<strong>幻影</strong>である。
<ul>
<li> ファイル・フォルダ … 実際にあるのは 0 と 1 の列だけ。 → 「デフラグ ツール」
<li> マルチタスク機能 … 実際には処理装置は 1個だけ。(タイムシェアリング) → 「タスクマネージャ」
<li> マルチウィンドウ機能 … 実際にある画面は 1つだけ。
<li> 文字・図形の処理機能 … 実際にあるのは画面上のピクセルだけ。
</ul>

<h2>ソフトウェアと比喩</h2>
<p>
コンピュータ上で使われる「ファイル」「電子メール」などの単語は、
現実世界での日本語とは違う意味をもっている。
これらはすべて現実世界と似たものに使われる「比喩」にすぎない。
<p>
「作る」「消す」「入れる」「落ちた」などの動詞も同様。
<p>
さらに「認証する」などの抽象的な用語が使われる場合もある。
<h4>注意:</h4>
<ul>
<li> これらの比喩をあまり文字どおりに受けとらないこと。
<li> 他人に説明するときにこれらの「用語」を多用しないこと。
</ul>

<hr>
<address>Copyright (c) 2015 Yusuke Shinyama</address>
