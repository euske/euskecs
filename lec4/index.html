<!DOCTYPE HTML>
<html lang="ja">
<head>
<title>プログラムを作るとはどういうことか</title>
<style><!--
body { line-height: 1.5; }
h1 { border-bottom: 4pt solid black; }
h2 { border-bottom: 2pt solid black; }
h3 { border-bottom: 1pt solid black; }
table { border-collapse: collapse; }
td { padding: 0.5em; text-align: center; }
p { margin: 0; }
.nav { font-size: 80%; }
.figure { margin: 0.5em; padding: 0.5em; border: 1px solid gray; }
.source { font-size: 80%; background:#eee; }
--></style>
<script language="javascript" src="../js/offline.js"></script>
</head>
<body>
<h1>プログラムを作るとはどういうことか</h1>

<div class=nav>
<a href="#what-is-program">[コンピュータ・プログラムとは]</a>
<a href="#program-execution">[プログラムはどうやって実行されるか]</a>
<a href="#program-development">[プログラムはどうやって作成するか]</a>
<a href="#common-sense">[プログラミングと常識]</a>
<a href="#what-is-hard">[プログラミングで大変なこと]</a>
</div>


<h2><a name="what-is-program">コンピュータ・プログラムとは</a></h2>

<h3>復習</h3>
<ul>
<li> 昔は回路を作りなおしていた。現在は命令の列。(= ソフトウェア)
<li> 記憶装置に記録されている。
<li> 演算装置が解釈して実行する。
<li> 以下のことが可能:
  <ul> 
    <li> 簡単な計算をする。
    <li> データを記憶装置から読み込み、書きこみ、複製できる。
    <li> 入力装置から受信したり、出力装置に送信したりできる。
      <ul> 
	<li> 文字、画像、音声などすべて 0 と 1 であらわす。
      </ul>
  </ul>
</ul>
<p>
現在では、プログラム (=ソフトウェア) がコンピュータの用途を決める。

<h3>「手続き」の考え方</h3>
<p>
コンピュータ・プログラムは「手続き」とも言われる。
実行する順序がとても重要。
<h4>例: カレーの作り方</h4>
<ol>
<li> 肉・野菜を炒める。
<li> 水を入れる。
<li> ルウを入れる。
<li> 火を止める。
</ol>
<h4>例: 自動販売機</h4>
<ol>
<li> お金を入れる。
<li> 商品を購入する。
<li> おつりを出す。
<li> 1. に戻る。
</ol>
<p>
これらの順序が違ったらうまくいかない。


<h2><a name="program-execution">プログラムはどうやって実行されるか</a></h2>

<h3>Windows 用のプログラム <code>abc.exe</code></h3>
<ul>
<li> バイナリエディタで 0 と 1 を見てみる。
<li> 「<code>abc</code>」の部分を「<code>123</code>」に書き換えてみる。
<li> 「<code>abc</code>」の部分を「<code>hello world</code>」に書き換えてみる。
</ul>
<p>
ふつうは、こんな 16進数を直接書いたりすることはない。
「<u>プログラミング言語</u>」というものを使って書く。

<h3>内部の動き</h3>
<ul>
<li> 原理的には … 入出力装置に 0 と 1 を送受信してハードウェアを制御する。
<li> 現実には … 現代のプログラマはほとんどハードウェアに直接0/1を送ったりしない。
<ul>
<li> あまりにも沢山の種類があり、いちいち使い方を調べてらんない。
<li> 0 と 1 だけで制御するのはあまりに複雑で、やってらんない。
</ul>
</ul>
<p>
現在、こうした機能の多くは<u>オペレーティングシステム (OS)</u> と
呼ばれるプログラムが提供している。
たとえば、「画面に文字を表示する」という OS の機能を使えば、
文字の構造や、ディスプレイの種類などは考えなくてもよい。
プログラムを作るさいには、OSの機能の使い方も学ばなければならない。
しかし使っている OS が変わると作成したプログラムを変更しなければならないことが多い。


<h2><a name="program-development">プログラムはどうやって作成するか</a></h2>
<p>
プログラムの作成のことを
「<u>プログラミング</u>」あるいは「<u>ソフトウェア開発</u>」という。

<h3>ソフトウェア開発の手順</h3>
<ol>
<li> 作りたいものと実現方法を決める。
<li> 実際のプログラム (文書) を書く。
  <p> 普通これには文書作成ソフト (例. メモ帳) を使う。
<li> 0と1の列に変換して実行する (あるいは、変換せずに実行する)。
  <p> 変換のためには、特別なソフトウェアが必要である。
<li> 動かなかったら 2. に戻る。
</ol>

<h3>インタプリタとコンパイラ、VM</h3>
<p>
コンピュータがプログラムを実行するには、
おもに2つの方式がある。プログラムの作成はそれによって変わってくる。
どちらも「命令を解釈して実行する」という部分は変わらない。

<h4>方式1. ハードウェアによる実行 (ネイティブ)</h4>
<p>
演算装置が直接 0 と 1 を解釈する。
<ul>
<li> 非常に簡単なことしかできない。
<li> 書くのが大変。
<li> 通常は<u>コンパイラ</u>を使ってプログラミング言語から 0 と 1 に変換する。
</ul>

<h4>方式2. ソフトウェアによる実行 (インタプリタ、VMあるいはエミュレータ)</h4>
<p>
ソフトウェアがプログラミング言語を解釈する。
このソフトウェアそのものネイティブで実行される (演算装置が解釈する)。
<ul>
<li> 書きやすい。
<li> 効率は悪い (二重に解釈されるため)
</ul>

<h3>プログラミング言語</h3>
<p>
実行方式と用途によって、プログラミング言語を使いわける。
<ul>
<li> ある言語を使うと、プログラムが短くてすむが、実行が遅い。
<li> ある言語を使うと、プログラムが速く実行できるが、複雑でわかりにくい。
<li> ある言語を使うと、OS の機能をより簡単に使える。
<li> ...
<li> 完璧なプログラミング言語というものは存在しない。
</ul>

<h4>ネイティブで実行される言語</h4>
<ul>
<li> アセンブリ言語
<li> C/C++
<blockquote class="figure source"><pre>
#include &lt;stdio.h&gt;

int main(int argc, char* argv[])
{
    char s[100];
    int i;
    for (i = 0; i &lt; 10; i++) {
        s[i] = '*';
        s[i+1] = 0;
        printf("%s\n", s);
    }
}
</pre></blockquote>
</ul>

<h4>インタプリタ/VMが解釈する言語</h4>
<ul>
<li> Java (JVM)
<blockquote class="figure source"><pre>
public class Program {
    public static void main(String[] args) {
        String s = "";
        for (int i = 0; i &lt; 10; i++) {
            s += "*";
            System.out.println(s);
        }
    }
}
</pre></blockquote>
<li> C# (CLR)
<li> Javascript (ブラウザ)
</ul>

<p>
ほかにも何百という言語がある。


<h3>最初のプログラム (Javascript)</h3>
<p>
ブラウザで F12 キーを押し、以下の行を入力する。
<blockquote class="figure source"><pre>
var s = ""; for (var i = 0; i &lt; 10; i++) { s += "*"; console.log(s); }
</pre></blockquote>

<h4>プログラミングと数学</h4>
<p>
「プログラムを作るためには数学が得意でなければならない」 - ある程度は真実。
ただし、計算が得意である必要はない。
<p>
<strong>例1:</strong>
n 個の * をつなげて三角形を表示する。
この三角形を右寄せにするためには、何個の空白をつければよいか?
<p>
<strong>例2:</strong>
幅w1×高さh1ピクセルの画像を幅 w2×高さh2のウインドウに表示したい。
縦が長いとすると、横は何ピクセルに縮小すればよいか?


<h2><a name="common-sense">プログラミングと常識</a></h2>
<p>
基本的に、コンピュータは「あたりまえ」のこと、
つまり普通の常識で理解できることしかしない。
ただし、あまりにも大量の処理を高速にやるので、
常識からはかけ離れたことをしているように見える。

<h3>常識から離れたようにみえる処理</h3>
<ul>
<li> 数百万桁におよぶ複雑な計算 -
  0 と 1 を一桁ずつ処理することによって答えを得ている。
<li> 将棋、チェスのような「賢いふるまい (人工知能)」 -
  すべての組み合せを片っぱしから試すことによって答えを得ている。
<li> 検索エンジン -
  すべての単語であらかじめ検索した結果を記憶しておくことによって
  一瞬で答えを出している。
<li> チャット -
  複数の層に分けて実装することで携帯電話とPCからのデータを統一して扱える。
  サーバでパケットを中継することで双方向の通信が可能。
</ul>
<p>
あらゆる手品には仕掛けが存在する。仕掛けがわかってしまえば
「なあーんだ」となる。ある意味で、プログラミングは手品に似ている。

<h3>機械は万能ではない</h3>
<ul>
<li> 情報は単なる 0 と 1 の羅列にすぎず、善悪は区別できない。
<li> すべてのプログラムが役に立つことをするとは限らない。
  <p> → 悪事を働くプログラムも沢山ある。
<li> すべてのプログラムが正しいとも限らない。(不具合、バグ)
  <p> → 「プログラムはあなたの意図したとおりには動かないが、
    あなたの書いたとおりに動く」
  <p> → GIGO (Garbage In, Garbage Out)
  <p> 複雑すぎて書いた本人もよくわかっていないことがありうる。
    <ul>
      <li> <u>技術的負債</u> (Technical Debt) という考え …
	「あまりよくできていないプログラム」は借金のように後からツケがくる。
    </ul>
</ul>


<h2><a name="what-is-hard">プログラミングで大変なこと</a></h2>

<h3>やりたいことを決定するのが大変</h3>
<ul>
<li> 何をしたいのかがわからない。
<li> 何千もの決定をする必要がある。
<li> やりたいことが説明できない。
</ul>

<h3>やりたいことを他人に伝えるのが大変</h3>
<ul>
<li> プログラムは長い時間をかけて作られる。
<li> 伝えることは山のようにある。
<li> いろいろな方法がある: 日本語、プログラムのコード、図。
<li> 「他人」は1ヶ月後の自分かもしれない。
</ul>

<h3>正しい動きを保証するのが大変</h3>
<ul>
<li> 何億もの考えられる組み合わせがある。
<li> すべての事態を想定できない。
<li> 悪人はつねに想像もできないような手口を使ってくる。
</ul>

<h3>機能を修正する・追加するのが大変</h3>
<ul>
<li> すでに動いているソフトウェアを止められない。
<li> 機能を変更すると、想像しなかった悪影響が出るかもしれない。
<li> 古いプログラムと新しいプログラムとつじつまを合わせるのが大変。
<li> 使っているOSの機能が変わると、
プログラムもそれに合わせて変更しなければならないことが多い。
</ul>

<h3>ソフトウェア開発を支援する技術</h3>
<ul>
<li> 決定するための技術 - アジャイル開発
<li> 記録するための技術 - バージョン管理、UML
<li> 保証するための技術 - 自動テスト、型検査
<li> 修正・追加のための技術 - バグ管理システム
</ul>
<p>
どれも根本的な解決ではない。


<hr>
<address>Copyright (c) 2015 Yusuke Shinyama</address>
